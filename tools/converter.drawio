<mxfile host="app.diagrams.net" modified="2024-02-15T13:56:19.762Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36" etag="qFNYwWz2_LuEFEcoK4og" version="23.1.1" type="github">
  <diagram name="Page-1" id="rc2w1ViO4SwAH4gsUvoJ">
    <mxGraphModel dx="1739" dy="444" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ei1pIP2o1uee5ukMiUAw-1" value="Application Boot Up&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="10" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-2" value="Key Cloack Auth take token and call api GET&lt;br&gt;&lt;br&gt;: &lt;span style=&quot;text-align: start; font-size: 12pt; font-family: Calibri, sans-serif;&quot;&gt;&lt;a style=&quot;color: rgb(5, 99, 193);&quot; href=&quot;https://gh20-dev-ml-02.guardhat.net/io/api/v2/message-processing/org-device-model&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;https://gh20-dev-ml-02.guardhat.net/io/api/v2/message-processing/org-device-model&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="120" width="630" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-3" value="each device model&amp;nbsp;&lt;br&gt;start: process" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="300" y="210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-4" value="call api to get device model detail&amp;nbsp;io url&lt;p style=&quot;margin: 0cm; font-size: 12pt; font-family: Calibri, sans-serif; text-align: start;&quot; class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(33, 37, 41); background: white;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;a style=&quot;color: rgb(5, 99, 193);&quot; href=&quot;https://gh20-dev-ml-02.guardhat.net/io/api/v2/device-models/82/detail&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; background: white;&quot;&gt;https://gh20-dev-ml-02.guardhat.net/io/api/v2/device-models/82/detail&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(33, 37, 41); background: white;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;span style=&quot;text-align: start; font-size: 12pt; font-family: Calibri, sans-serif;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;text-align: start; font-size: 12pt; font-family: Calibri, sans-serif;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="92" y="300" width="536" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-5" value="in response:&amp;nbsp;DeviceModelsResponse:&amp;nbsp;BaseResponse: List: OrgConfigValueResponse: name: config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="92" y="390" width="566" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-6" value="compare config name ans store it in map :&amp;nbsp;USERNAME, MQTT_BROKER, PASSWORD, TOPIC_NAME&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="230" y="470" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-7" value="get&amp;nbsp;MessageTypeConverterDetailedResponse: name: messageTypeConverters&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="110" y="555" width="510" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-8" value="check&amp;nbsp;DeviceModelsResponse:&amp;nbsp;DataProtocolResponse: name: dataProtocols" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="205" y="630" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-9" value="if empty dont process" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="620" y="630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-10" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-8" target="ei1pIP2o1uee5ukMiUAw-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="700" as="sourcePoint" />
            <mxPoint x="440" y="650" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-11" value="iterate messageTypeConverters" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="120" y="710" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-12" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.178;entryY=-0.058;entryDx=0;entryDy=0;exitX=0.094;exitY=0.975;exitDx=0;exitDy=0;entryPerimeter=0;exitPerimeter=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-7" target="ei1pIP2o1uee5ukMiUAw-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="840" as="sourcePoint" />
            <mxPoint x="440" y="790" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-13" value="Compare &lt;br&gt;MessageTypeConverterDetailedResponse:&amp;nbsp;MessageTypesResponse: name: toMessageTypes&lt;br&gt;CapabilityResponse:&amp;nbsp;MessageTypeDetailedResponse: name:&amp;nbsp;messageTypes" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="800" width="690" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-16" value="if matched" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="130" y="890" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-17" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=0.177;exitY=1.058;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-13" target="ei1pIP2o1uee5ukMiUAw-16" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="980" as="sourcePoint" />
            <mxPoint x="440" y="930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-18" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-16" target="ei1pIP2o1uee5ukMiUAw-22" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="980" as="sourcePoint" />
            <mxPoint x="320" y="990" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-21" value="true" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ei1pIP2o1uee5ukMiUAw-18" vertex="1" connectable="0">
          <mxGeometry x="-0.1004" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-19" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.133;entryY=1.058;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-16" target="ei1pIP2o1uee5ukMiUAw-11" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="880" as="sourcePoint" />
            <mxPoint x="440" y="930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-20" value="false&amp;nbsp;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ei1pIP2o1uee5ukMiUAw-19" vertex="1" connectable="0">
          <mxGeometry x="-0.0468" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-22" value="get topic detail&amp;nbsp;&lt;br&gt;capability:&amp;nbsp;&lt;a style=&quot;font-family: Calibri, sans-serif; font-size: 12pt; text-align: start; background-color: initial; color: rgb(5, 99, 193);&quot; href=&quot;https://gh20-dev-ml-02.guardhat.net/io/api/v2/topic-name/persist?id=45&amp;amp;orgId=12&amp;amp;persistStore=capability&quot;&gt;https://gh20-dev-ml-02.guardhat.net/io/api/v2/topic-name/persist?id=45&amp;amp;orgId=12&amp;amp;persistStore=capability&lt;/a&gt;&lt;p style=&quot;margin: 0cm; font-size: 12pt; font-family: Calibri, sans-serif; text-align: start;&quot; class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(33, 37, 41); background: white;&quot;&gt;&lt;/span&gt;&lt;/p&gt;raw:&amp;nbsp;&lt;a style=&quot;font-family: Calibri, sans-serif; font-size: 12pt; text-align: start; background-color: initial; color: rgb(5, 99, 193);&quot; href=&quot;https://gh20-dev-ml-02.guardhat.net/io/api/v2/topic-name/persist?id=45&amp;amp;orgId=12&amp;amp;persistStore=raw&quot;&gt;https://gh20-dev-ml-02.guardhat.net/io/api/v2/topic-name/persist?id=45&amp;amp;orgId=12&amp;amp;persistStore=raw&lt;/a&gt;&lt;p style=&quot;margin: 0cm; font-size: 12pt; font-family: Calibri, sans-serif; text-align: start;&quot; class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(33, 37, 41); background: white;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin: 0cm; font-size: 12pt; font-family: Calibri, sans-serif; text-align: start;&quot; class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;Segoe UI&amp;quot;, sans-serif; color: rgb(33, 37, 41); background: white;&quot;&gt;&lt;/span&gt;&lt;/p&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-20" y="1040" width="925" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-23" value="if&amp;nbsp;dataProtocol: name:&amp;nbsp;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;MQTT_PULL, MQTT_PUSH" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="69" y="1130" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-24" value="if&amp;nbsp;dataProtocol: name: HTTP_STREAM" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="515" y="1130" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-25" value="if&amp;nbsp;dataProtocol: name:&amp;nbsp;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;MQTT_PULL, MQTT_PUSH" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1160" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-26" value="Check if existing thread running using same detail (orgId,deviceModelId,converterId)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1241" y="80" width="249" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-27" value="if yes dont do anything" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-28" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-26" target="ei1pIP2o1uee5ukMiUAw-27" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1040" y="230" as="sourcePoint" />
            <mxPoint x="1090" y="180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-29" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-26" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1040" y="230" as="sourcePoint" />
            <mxPoint x="1300" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-30" value="start a thread: pass configs, deviceModelId, capability, data protocol, MQTT detail from config file, all topic detail" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="170" width="410" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-31" value="Start : MQTT Client with unique client id, subscribe to a topic&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1100" y="250" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-32" value="GuardhatMQTTCallback: handler: when message receive from MQTT&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="330" width="420" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-33" value="From Topic Message Recieve&lt;br&gt;Convert topic message to string msgSourceJson&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1090" y="410" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-34" value="Start New Thread:&amp;nbsp;MessageProcessingService&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1190" y="495" width="340" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-35" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-33" target="ei1pIP2o1uee5ukMiUAw-34" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1040" y="490" as="sourcePoint" />
            <mxPoint x="1090" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-36" value="check converter&lt;br&gt;MessageTypeConverterDetailedResponse:&amp;nbsp;MessageTypeConverterFlowType: name: flow type" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1190" y="580" width="450" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-37" value="if&amp;nbsp;SWITCH_BY_CONTROL_VARIABLE&lt;br&gt;=flowType&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1240" y="660" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-38" value="get MessageTypeConverterDetailedResponse:&amp;nbsp;controlVariableName&lt;br&gt;get MessageTypeConverterDetailedResponse:&amp;nbsp;controlVariableValue" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1500" y="660" width="400" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-39" value="if variable not start with &quot;$.&quot; append it" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1500" y="730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-40" value="get value of&amp;nbsp;variableName from topic message" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1500" y="800" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-41" value="if value not match with controlVariableValue&lt;br&gt;&lt;br&gt;exit" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1800" y="800" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-42" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="ei1pIP2o1uee5ukMiUAw-41" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1760" y="830" as="sourcePoint" />
            <mxPoint x="1400" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-43" value="get&amp;nbsp;MessageTypeConverterDetailedResponse:&amp;nbsp;MessageTypesResponse:&amp;nbsp;toMessageTypes&lt;br&gt;get&amp;nbsp;MessageTypeConverterDetailedResponse:&amp;nbsp;MessageTypesResponse: fromMessageTypes" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1240" y="880" width="580" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-44" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-37" target="ei1pIP2o1uee5ukMiUAw-38" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1350" y="830" as="sourcePoint" />
            <mxPoint x="1400" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-45" value="get&amp;nbsp;fromMessageType:&amp;nbsp;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;MessageTypeElementResponse:&amp;nbsp;messageTypeElements || List" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1240" y="960" width="670" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-46" value="get toMessageType:&amp;nbsp;MessageTypeElementResponse:&amp;nbsp;messageTypeElements || List" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1230" y="1000" width="729" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-47" value="get&amp;nbsp;MessageTypeConverterDetailedResponse:&amp;nbsp;ElementMappingDetailedResponse: name:&amp;nbsp;elementMappings || List" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1268" y="1030" width="800" height="20" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-48" value="get toMessageType:&amp;nbsp;&amp;nbsp;sampleJson: called:&amp;nbsp;outputJson" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1121" y="1070" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-49" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.019;exitY=1.075;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-46" target="ei1pIP2o1uee5ukMiUAw-48" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1350" y="1030" as="sourcePoint" />
            <mxPoint x="1400" y="980" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-50" value="iterate:&amp;nbsp;elementMappingList&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1500" y="1080" width="290" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-51" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.588;entryY=-0.037;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-47" target="ei1pIP2o1uee5ukMiUAw-50" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1350" y="1090" as="sourcePoint" />
            <mxPoint x="1400" y="1040" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-53" value="elementMapping:&amp;nbsp;fromMessageTypeElementId,&amp;nbsp;toMessageTypeElementId&amp;nbsp;&lt;br&gt;match with fromMessageType id, toMessageTypeId" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1150" width="450" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-54" value="if&amp;nbsp;fromMsgTypeElement is empty and elementMappingList&amp;nbsp;FromMessageTypeElementId contains 0 id, and&amp;nbsp;CustomValue not empty&lt;br&gt;create a temporary&amp;nbsp;fromMsgTypeElement out of it" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1230" width="530" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-55" value="if&amp;nbsp;fromMsgTypeElement or&amp;nbsp;toMsgTypeElement empty&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1300" width="280" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-58" value="" style="edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;entryX=0.609;entryY=1.004;entryDx=0;entryDy=0;entryPerimeter=0;exitX=-0.006;exitY=0.583;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-55" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1440" y="1330" as="sourcePoint" />
            <mxPoint x="1546.6099999999997" y="1119.9999999999998" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1440" y="1310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-59" value="yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ei1pIP2o1uee5ukMiUAw-58" vertex="1" connectable="0">
          <mxGeometry x="0.0599" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-60" value="call rest api:&amp;nbsp;&lt;br&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;/api/v2/invoker/start/byDeviceModelId/start/byDeviceModelId&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-260" y="10" width="490" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-61" value="fromMessageTypes:&amp;nbsp;MessageTypeDetailedResponse:&amp;nbsp;MessageTypeElementResponse: List:&lt;br&gt;name: fromMsgTypeElement:&amp;nbsp;&amp;nbsp;fullPath append&amp;nbsp;&quot;$.&quot; :&amp;nbsp;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;fromJsonPath" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1570" y="1370" width="730" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-62" value="value=get value of fromJsonPath from topic message&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1680" y="1440" width="340" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-63" value="fromMessageTypes:&amp;nbsp;MessageTypeDetailedResponse:&amp;nbsp;MessageTypeElementResponse: List:&lt;br&gt;name: fromMsgTypeElement:&amp;nbsp; &lt;br&gt;if stereotype&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;=&lt;/span&gt;CUSTOM_VALUE then &lt;br&gt;value=&amp;nbsp;ElementMappingDetailedResponse:&amp;nbsp;customValue" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1680" y="1500" width="610" height="70" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-64" value="if value==null &amp;amp;&amp;amp;&amp;nbsp;toMessageTypes:&amp;nbsp;toMsgTypeElement:&amp;nbsp;messageTypeElements:&amp;nbsp;optionality =REQUIRED&lt;br&gt;return null , don&#39;t process&lt;br&gt;&lt;span style=&quot;font-size: medium; text-align: start;&quot;&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1680" y="1600" width="680" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-65" value="value ==null" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1720" y="1650" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-68" value="" style="edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;curved=0;rounded=0;endSize=8;startSize=8;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-65" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1690" y="1670" as="sourcePoint" />
            <mxPoint x="1540" y="1310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-69" value="yes&lt;br&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ei1pIP2o1uee5ukMiUAw-68" vertex="1" connectable="0">
          <mxGeometry x="-0.1743" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-70" value="if&amp;nbsp;fromJsonPath contains [0]" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1530" y="1700" width="280" height="36" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-71" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.125;exitY=1.061;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-61" target="ei1pIP2o1uee5ukMiUAw-70" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1790" y="1630" as="sourcePoint" />
            <mxPoint x="1840" y="1580" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-72" value="initialize&amp;nbsp;multipleMessageArray list of map" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1560" y="1741.5" width="430" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-73" value="fromJsonPath replace [0] to [1]&lt;br&gt;val=get value from topic message of fromJsonPath" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1562" y="1780" width="426" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-74" value="while val is not null" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1560" y="1820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-75" value="toJsonPath=MessageTypeConverterDetailedResponse:&amp;nbsp;toMessageTypes:&amp;nbsp;MessageTypeDetailedResponse:&amp;nbsp;MessageTypeElementResponse: fullPath" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1735" y="1830" width="800" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-76" value="update map key toJsonPath value to val&lt;br&gt;add this to list&lt;br&gt;fromJsonPath=fromJsonPath replace [1] to [2]&lt;br&gt;val=get value from topic message of fromJsonPath" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1735" y="1880" width="420" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-77" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.581;entryY=1.039;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1741.9999999999995" y="1910" as="sourcePoint" />
            <mxPoint x="1636.7199999999998" y="1882.3399999999997" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-78" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1687" y="1850" as="sourcePoint" />
            <mxPoint x="1741.9999999999995" y="1850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-79" value="if&amp;nbsp;MessageTypeConverterDetailedResponse:&amp;nbsp;fromMessageTypes:&amp;nbsp;MessageTypeDetailedResponse:&amp;nbsp;MessageTypeElementResponse:&amp;nbsp;stereotype&lt;br&gt;=EXT_DEVICE_IDENTITY" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1530" y="1960" width="830" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-80" value="Call:&amp;nbsp;https://gh20-dev-ml-02.guardhat.net/io/api/v2/devices/byExternalId?extRef=test&amp;amp;orgId=12" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1562" y="2010" width="608" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-81" value="get&amp;nbsp;DeviceResponse&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1562" y="2060" width="178" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-82" value="dont process it" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1959" y="2060" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-83" value="" style="endArrow=classic;html=1;rounded=0;entryX=-0.017;entryY=0.421;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="ei1pIP2o1uee5ukMiUAw-81" target="ei1pIP2o1uee5ukMiUAw-82" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1760" y="1990" as="sourcePoint" />
            <mxPoint x="1810" y="1940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-84" value="null" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ei1pIP2o1uee5ukMiUAw-83" vertex="1" connectable="0">
          <mxGeometry x="-0.3526" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-85" value="value=get First Device Guid" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1562" y="2100" width="288" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-86" value="if&amp;nbsp;MessageTypeConverterDetailedResponse:&amp;nbsp;fromMessageTypes:&amp;nbsp;MessageTypeDetailedResponse:&amp;nbsp;MessageTypeElementResponse:&amp;nbsp;stereotype&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;=&amp;nbsp;TIMESTAMP" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1530" y="2160" width="840" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-87" value="MessageTypeConverterDetailedResponse:&amp;nbsp;fromMessageTypes:&amp;nbsp;MessageTypeElementResponse&amp;nbsp;:&amp;nbsp;format" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1560" y="2215" width="730" height="25" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-88" value="if format=EPOCH&amp;nbsp;value=EPOCH timestamp&amp;nbsp;&lt;br&gt;if format=EPOCH&amp;nbsp;value=OffsetDateTime&amp;nbsp;timestamp&amp;nbsp;&lt;br&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;timestamp = value&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1562" y="2250" width="658" height="50" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-89" value="toJsonPath=toMsgTypeElement fullPath , append&amp;nbsp;&quot;$.&quot;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1530" y="2320" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-90" value="if fromJsonPath contains&amp;nbsp;alertSeverity , toJsonPath contains&amp;nbsp;header.priority , value =HIGH" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1530" y="2360" width="650" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ei1pIP2o1uee5ukMiUAw-91" value="value =HIGH then value=2&lt;br&gt;if value!=HIGH then value =3" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1815" y="2400" width="375" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XzORqDxbFwmmnYt8RqeT-1" value="save in&amp;nbsp;outputJson (toMessageType sampleJson&lt;span style=&quot;background-color: initial;&quot;&gt;) ,&amp;nbsp;&lt;/span&gt;toJsonPath,&amp;nbsp;value" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1534" y="2450" width="496" height="40" as="geometry" />
        </mxCell>
        <mxCell id="XzORqDxbFwmmnYt8RqeT-2" value="end of iterate:&amp;nbsp;elementMappingList" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1490" y="2500" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="XzORqDxbFwmmnYt8RqeT-3" value="&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;var messageTypeJsonPath = &lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;$.DevEUI_uplink.payload.messageType&quot;&lt;/span&gt;&lt;span style=&quot;color:#cc7832;&quot;&gt;;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#cc7832;&quot;&gt;var &lt;/span&gt;eventTypeJsonPath = &lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;$.DevEUI_uplink.payload.eventType&quot;&lt;/span&gt;&lt;span style=&quot;color:#cc7832;&quot;&gt;;&lt;/span&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1490" y="2540" width="630" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
